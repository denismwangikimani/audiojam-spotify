<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AudioJam</title>
    <!-- Site Name -->
    <!-- Link to favicon -->
    <link
      rel="icon"
      type="image/x-icon"
      href="{{ url_for('static', filename='AudioJam_logo.jpg') }}"
    />
    <style>
      /* General Styling */
      body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 0;
      }
      .content {
        width: 90%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }
      h1,
      h2 {
        text-align: center;
      }

      /* Card Styling */
      .card {
        background-color: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      .card ul {
        list-style-type: none;
        padding: 0;
      }
      .card li {
        margin: 15px 0;
        display: flex;
        align-items: center;
      }
      .card img {
        width: 50px;
        height: 50px;
        margin-right: 20px;
        border-radius: 8px;
      }

      /* Grid Layout for Billboard and Top Items */
      .grid-container {
        display: grid;
        gap: 20px;
      }

      /* Responsive grid layout */
      @media (min-width: 769px) {
        .grid-container {
          grid-template-columns: repeat(
            2,
            1fr
          ); /* Two columns on larger screens */
        }
      }

      /* Billboard Hot 100 Section */
      .top-charts {
        margin-top: 30px;
      }

      /* Recommendations Styling */
      .recommendations-section {
        margin-top: 40px;
      }
      .recommendations {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
      }
      .recommendation {
        background-color: white;
        padding: 10px;
        border-radius: 10px;
        box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1);
        width: calc(50% - 10px);
        text-align: center;
      }
      .recommendation img {
        width: 100%;
        max-width: 150px;
        height: auto;
        margin-bottom: 10px;
        border-radius: 8px;
      }

      /* Form Styling */
      .form-container {
        display: flex;
        justify-content: center;
        margin-top: 30px;
        flex-wrap: wrap;
      }
      select,
      button {
        padding: 10px;
        border-radius: 5px;
        margin: 5px;
        border: 1px solid #ccc;
        width: 100%;
        max-width: 300px;
      }
      button {
        background-color: #1db954;
        color: white;
        border: none;
        cursor: pointer;
      }
      button:hover {
        background-color: #1ed760;
      }

      /* Responsive adjustments for smaller screens */
      @media (max-width: 768px) {
        .content {
          width: 95%;
          padding: 0 10px;
        }

        .grid-container {
          grid-template-columns: 1fr; /* Stacked vertically on smaller screens */
        }

        .card img {
          width: 40px;
          height: 40px;
          margin-right: 10px;
        }

        .recommendation {
          width: calc(100% - 10px);
          margin-bottom: 20px;
        }
      }
    </style>
  </head>
  <body>
    <div class="content">
      <h1>Welcome, {{ username }}!</h1>

      <!-- Billboard Hot 100 Section -->
      <h2>Billboard Hot 100</h2>
      <div class="grid-container top-charts">
        <div class="card">
          <ul>
            {% for song in top_chart_songs[:5] %}
            <li>
              <img src="{{ song.image }}" alt="{{ song.title }}" />
              <div>
                <strong>{{ song.rank }}. {{ song.title }}</strong> by {{
                song.artist }}
                <p>
                  Weeks on Chart: {{ song.weeks }} | Peak Position: {{ song.peak
                  }}
                </p>
              </div>
            </li>
            {% endfor %}
          </ul>
        </div>
        <div class="card">
          <ul>
            {% for song in top_chart_songs[5:10] %}
            <li>
              <img src="{{ song.image }}" alt="{{ song.title }}" />
              <div>
                <strong>{{ song.rank }}. {{ song.title }}</strong> by {{
                song.artist }}
                <p>
                  Weeks on Chart: {{ song.weeks }} | Peak Position: {{ song.peak
                  }}
                </p>
              </div>
            </li>
            {% endfor %}
          </ul>
        </div>
      </div>

      <!-- Form to select time range -->
      <div class="form-container">
        <form action="{{ url_for('views.show_top_items') }}" method="POST">
          <label for="time_range">Select time range for top items:</label>
          <select name="time_range" id="time_range">
            <option value="short_term">Short Term (Last 4 weeks)</option>
            <option value="medium_term" selected>
              Medium Term (Last 6 months)
            </option>
            <option value="long_term">Long Term (Several years)</option>
          </select>
          <button type="submit">Show Top Items</button>
        </form>
      </div>

      <!-- User's Top Artists -->
      <div class="top-items">
        <h2>Your Top Artists</h2>
        <div class="grid-container">
          <div class="card">
            <ul>
              {% for artist in artists[:5] %}
              <li>
                <img src="{{ artist.images[0].url }}" alt="{{ artist.name }}" />
                <div><strong>{{ artist.rank }}. {{ artist.name }}</strong></div>
              </li>
              {% endfor %}
            </ul>
          </div>
          <div class="card">
            <ul>
              {% for artist in artists[5:] %}
              <li>
                <img src="{{ artist.images[0].url }}" alt="{{ artist.name }}" />
                <div><strong>{{ artist.rank }}. {{ artist.name }}</strong></div>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>

      <!-- User's Top Tracks -->
      <div class="top-items">
        <h2>Your Top Tracks</h2>
        <div class="grid-container">
          <div class="card">
            <ul>
              {% for track in tracks[:5] %}
              <li>
                <img
                  src="{{ track.album.images[0].url }}"
                  alt="{{ track.name }}"
                />
                <div>
                  <strong>{{ track.rank }}. {{ track.name }}</strong> by {{
                  track.artists[0].name }}
                </div>
              </li>
              {% endfor %}
            </ul>
          </div>
          <div class="card">
            <ul>
              {% for track in tracks[5:] %}
              <li>
                <img
                  src="{{ track.album.images[0].url }}"
                  alt="{{ track.name }}"
                />
                <div>
                  <strong>{{ track.rank }}. {{ track.name }}</strong> by {{
                  track.artists[0].name }}
                </div>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>

      <!-- Song Recommendation Form -->
      <div class="form-container">
        <form action="{{ url_for('views.show_top_items') }}" method="POST">
          <label for="selected_song">Select a song for recommendations:</label>
          <select name="selected_song" id="selected_song">
            {% for song in music_list %}
            <option value="{{ song }}">{{ song }}</option>
            {% endfor %}
          </select>
          <button type="submit">Show Recommendations</button>
        </form>
      </div>

      <!-- Song Recommendations Section -->
      <div class="recommendations-section">
        <h2>Recommended Songs Based on Your Selection</h2>
        <div class="recommendations">
          {% for rec in recommendations %}
          <div class="recommendation">
            <img src="{{ rec.image_url }}" alt="{{ rec.name }}" />
            <p><strong>{{ rec.name }}</strong> by {{ rec.artist }}</p>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </body>
</html>
